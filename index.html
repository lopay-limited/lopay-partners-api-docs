
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Documentation for the Lopay Partner API"
        >

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

    <title>Lopay Partner API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-96e170df.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-614e8f31.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-024da600.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <div style="display: flex; justify-content: center; margin: 10px">
        <img src="images/logo-a8d41690.png" class="logo" alt="" />
      </div>
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#environments" class="toc-h1 toc-link" data-title="Environments">Environments</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#webhooks" class="toc-h1 toc-link" data-title="Webhooks">Webhooks</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#available-events" class="toc-h2 toc-link" data-title="Available events">Available events</a>
                  </li>
                  <li>
                    <a href="#event-data-structure" class="toc-h2 toc-link" data-title="Event data structure">Event data structure</a>
                  </li>
                  <li>
                    <a href="#subscribing-to-webhook-events" class="toc-h2 toc-link" data-title="Subscribing to webhook events">Subscribing to webhook events</a>
                  </li>
                  <li>
                    <a href="#update-webhook-subscription" class="toc-h2 toc-link" data-title="Update webhook subscription">Update webhook subscription</a>
                  </li>
                  <li>
                    <a href="#listing-all-webhook-subscriptions" class="toc-h2 toc-link" data-title="Listing all webhook subscriptions">Listing all webhook subscriptions</a>
                  </li>
                  <li>
                    <a href="#verifying-webhook-requests" class="toc-h2 toc-link" data-title="Verifying webhook requests">Verifying webhook requests</a>
                  </li>
                  <li>
                    <a href="#webhook-retries" class="toc-h2 toc-link" data-title="Webhook retries">Webhook retries</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#payment-links" class="toc-h1 toc-link" data-title="Payment links">Payment links</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#creating-a-payment-link" class="toc-h2 toc-link" data-title="Creating a payment link">Creating a payment link</a>
                  </li>
                  <li>
                    <a href="#updating-a-payment-link" class="toc-h2 toc-link" data-title="Updating a payment link">Updating a payment link</a>
                  </li>
                  <li>
                    <a href="#sending-a-payment-link" class="toc-h2 toc-link" data-title="Sending a payment link">Sending a payment link</a>
                  </li>
                  <li>
                    <a href="#revoke-a-payment-link" class="toc-h2 toc-link" data-title="Revoke a payment link">Revoke a payment link</a>
                  </li>
                  <li>
                    <a href="#list-payment-links" class="toc-h2 toc-link" data-title="List payment links">List payment links</a>
                  </li>
                  <li>
                    <a href="#get-payment-link" class="toc-h2 toc-link" data-title="Get payment link">Get payment link</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a target='_blank' href='https://lopay.com'>Learn more about Lopay</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>The Lopay Partner API enables partners to seamlessly send payment links and collect payments through their applications. This API also provides webhooks to notify partners of various payment-related events, ensuring real-time updates and streamlined operations.</p>

<p><strong>Key Features</strong><br>
- <strong>Send Payment Links:</strong> Generate and send payment links to customers.<br>
- <strong>Webhooks:</strong> Receive real-time notifications on payment events.  </p>
<h1 id='environments'>Environments</h1>
<table><thead>
<tr>
<th>Environment</th>
<th>URL</th>
</tr>
</thead><tbody>
<tr>
<td>Staging</td>
<td><code>https://staging.api.lopay.com</code></td>
</tr>
<tr>
<td>Production</td>
<td><code>https://api.lopay.com</code></td>
</tr>
</tbody></table>
<h1 id='authentication'>Authentication</h1>
<p>The Lopay Partner API uses API keys to allow access to the API. All partners will be provided a unique API key.</p>

<p>Your API key must be included in all API requests to the server in a header that looks like the following:</p>

<p><code>x-api-key: api-key</code></p>

<aside class="notice">
You must replace <code>api-key</code> with your API key.
</aside>

<p>You must also include an <code>x-merchant-id</code> header when acting on behalf of a Lopay account.</p>
<h1 id='webhooks'>Webhooks</h1>
<p>Webhooks are a way for Lopay to notify partners when a significant event has taken place.</p>
<h2 id='available-events'>Available events</h2>
<p>The table below contains the events that it is possible to subscribe to. If you would like any new events added, please get in touch with your use case and we will usually be able to add support for the new event.</p>

<table><thead>
<tr>
<th>Event</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>payment.success</code></td>
<td>Payment was successful.</td>
</tr>
<tr>
<td><code>payment.failed</code></td>
<td>Payment has failed.</td>
</tr>
<tr>
<td><code>paymentLink.created</code></td>
<td>Payment link created.</td>
</tr>
<tr>
<td><code>paymentLink.updated</code></td>
<td>Payment link has been updated.</td>
</tr>
<tr>
<td><code>paymentLink.revoked</code></td>
<td>Payment link has been revoked.</td>
</tr>
</tbody></table>
<h2 id='event-data-structure'>Event data structure</h2>
<p>All events share the following basic structure:</p>

<aside class="pre">
{
  "id": "cbb90acf-a45d-4b2a-84dd-b6962921d6aa",
  "object": "event",
  "createdAt": "2024-06-12T19:03:04.456Z",
  "type": "payment.success",
  "data": {} // data specific to the event
}
</aside>
<h2 id='subscribing-to-webhook-events'>Subscribing to webhook events</h2>
<p>Configure a new webhook subscription.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> <span class="s2">"POST "</span>https://staging.api.lopay.com/api/1/partner/webhooks<span class="s2">" </span><span class="se">\</span><span class="s2">
  -H "</span>x-api-key: api-key<span class="s2">" </span><span class="se">\</span><span class="s2">
  -H "</span>content-type: application/json<span class="s2">" </span><span class="se">\</span><span class="s2">
  -d '{
        "</span>events<span class="s2">": ["</span>payment.success<span class="s2">"],
        "</span>url<span class="s2">": "</span>https://your-api-url.com/webhooks/lopay<span class="s2">"
      }'
</span></code></pre></div>
<blockquote>
<p>201 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6b1b34ee-309e-493b-b59c-1d2430611202"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-api-url.com/webhooks/lopay"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"payment.success"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"webhookSecretKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54337065d2e6c27e0e586e689d0f17debd22d955"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request'>HTTP Request</h3>
<p><code>POST http://staging.api.lopay.com/api/1/partner/webhooks</code></p>
<h3 id='request-body'>Request body</h3>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>events</code></td>
<td>string[]</td>
<td>Array of events to subscribe to.</td>
</tr>
<tr>
<td><code>url</code></td>
<td>string</td>
<td>The URL you want us to send events to.</td>
</tr>
</tbody></table>
<h3 id='response-body'>Response body</h3>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>Subscription ID.</td>
</tr>
<tr>
<td><code>url</code></td>
<td>string</td>
<td>The URL you want us to send events to.</td>
</tr>
<tr>
<td><code>events</code></td>
<td>string[]</td>
<td>List of events you are now subscribed to.</td>
</tr>
<tr>
<td><code>webhookSecretKey</code></td>
<td>string</td>
<td>Secret key to verify incoming webhook requests.</td>
</tr>
</tbody></table>
<h2 id='update-webhook-subscription'>Update webhook subscription</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> <span class="s2">"POST "</span>https://staging.api.lopay.com/api/1/partner/webhooks/:subscriptionId<span class="s2">" </span><span class="se">\</span><span class="s2">
  -H "</span>x-api-key: api-key<span class="s2">" </span><span class="se">\</span><span class="s2">
  -H "</span>content-type: application/json<span class="s2">" </span><span class="se">\</span><span class="s2">
  -d '{
        "</span>events<span class="s2">": ["</span>payment.success<span class="s2">"],
        "</span>url<span class="s2">": "</span>https://your-api-url.com/webhooks/lopay<span class="s2">"
      }'
</span></code></pre></div>
<blockquote>
<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6b1b34ee-309e-493b-b59c-1d2430611202"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-api-url.com/webhooks/lopay"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"payment.success"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Update the events or URL of your webhook subscription.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST http://staging.api.lopay.com/api/1/partner/webhooks/:subscriptionId</code></p>
<h3 id='request-body-2'>Request body</h3>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>events</code></td>
<td>string[]</td>
<td>Array of events to subscribe to.</td>
</tr>
<tr>
<td><code>url</code></td>
<td>string</td>
<td>The URL you want us to send events to.</td>
</tr>
</tbody></table>

<aside class="warning">Ensure you specify ALL the events you want to subscribe to.</aside>
<h3 id='response-body-2'>Response body</h3>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>Subscription ID.</td>
</tr>
<tr>
<td><code>url</code></td>
<td>string</td>
<td>The URL you want us to send events to.</td>
</tr>
<tr>
<td><code>events</code></td>
<td>string[]</td>
<td>List of events you are now subscribed to.</td>
</tr>
</tbody></table>
<h2 id='listing-all-webhook-subscriptions'>Listing all webhook subscriptions</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://staging.api.lopay.com/api/1/partner/webhooks"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"x-api-key: api-key"</span>
</code></pre></div>
<blockquote>
<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"webhooks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6b1b34ee-309e-493b-b59c-1d2430611202"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-api-url.com/webhooks/lopay"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"payment.success"</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET http://staging.api.lopay.com/api/1/partner/webhooks</code></p>
<h3 id='response-body-3'>Response body</h3>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>webhooks[].id</code></td>
<td>string</td>
<td>Subscription ID.</td>
</tr>
<tr>
<td><code>webhooks[].url</code></td>
<td>string</td>
<td>The URL you want us to send events to.</td>
</tr>
<tr>
<td><code>webhooks[].events</code></td>
<td>string[]</td>
<td>List of events you are now subscribed to.</td>
</tr>
</tbody></table>
<h2 id='verifying-webhook-requests'>Verifying webhook requests</h2>
<p>In each request that Lopay send to a partner endpoint there will be a <code>X-Lopay-Webhook-Signature</code> header. Partners can use this signature along with the secret key to verify that the request was sent by Lopay, and not by a third party.</p>

<p>Each subscription to a Lopay webhook generates a new secret key and returns it. So, in the case of multiple subscriptions with different endpoints, partners need to use the corresponding secret key to verify requests to each of them.</p>

<p>To verify a request is from Lopay, partners need to compute the hash signature and compare this with the signature from the header to ensure they match. Partners can compute the hash signature by hashing the received payload with the SHA-256 function and the secret key shared previously. The following outlines in detail the steps required to verify the signature:</p>

<ol>
<li>Extract the base64 encoded signature from the X-Lopay-Webhook-Signature header. The header is of the form <code>sha256=AKnj34jY...</code> so extract accordingly.<br></li>
<li>Decode the retrieved signature from base64.<br></li>
<li>Compute the expected signature with the SHA-256 function. Use the secret key (which is base 64 encoded) associated with this endpoint as the key and the request payload string as the message.<br></li>
<li>Compare your generated hash signature with the decoded one extracted from the header. You may want to use a constant-time string comparison like compare_digest to protect against timing based attacks.<br></li>
</ol>

<aside class="pre">
// Sample TypeScript code to verify signature

import crypto from 'crypto';
import express, { Request, Response } from 'express';
import bodyParser from 'body-parser';

export function calculateSignature(
  secret: string,
  payload: string,
): string {
  return crypto.createHmac('sha256', secret)
               .update(payload, 'utf8')
               .digest('hex');
}

export function verifySignature(
    secret: string,
    payload: string,
    signature: string,
): boolean {
  const calculatedSignature = calculateSignature(secret, payload);
  
  return crypto.timingSafeEqual(
    Buffer.from(calculatedSignature),
    Buffer.from(signature),
  );
}

const app = express();
const port = 3000;

// Replace with your actual Lopay secret
const LOPAY_WEBHOOK_SECRET = '54337065d2e6c27e0e586e689d0f17debd22d955';

// Middleware to parse JSON bodies
app.use(bodyParser.json());

// Webhook endpoint
app.post('/webhook', (req: Request, res: Response) => {
  const payload = JSON.stringify(req.body);
  const signature = req.headers['X-Lopay-Webhook-Signature'] as string;

  if (!signature) {
    return res.status(400).send('Signature header is missing');
  }

  if (verifySignature(LOPAY_WEBHOOK_SECRET, payload, signature)) {
    console.log('Webhook verified:', req.body);
    // Handle the webhook event
    res.status(200).send('Webhook received');
  } else {
    console.error('Invalid signature');
    res.status(400).send('Invalid signature');
  }
});

app.listen(port, () => {
  console.log(`Server running on port ${port}`);
});
</aside>
<h2 id='webhook-retries'>Webhook retries</h2>
<p>In the event that your endpoint returns a non-200 response, we will retry the deliver 5 additional times through out the day. If after the 5th retry we still receive a non-200 response, we will drop the event.</p>
<h1 id='payment-links'>Payment links</h1><h2 id='creating-a-payment-link'>Creating a payment link</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> <span class="s2">"POST"</span> <span class="s2">"https://staging.api.lopay.com/api/1/partner/payment-link"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"x-api-key: api-key"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"x-merchant-id: merchant-id"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
        "amount": {
          "units": 5000,
          "currencyCode": "GBP"
        },
        "description": "Payment for invoice #1234",
        "dataCollection": ["name", "email"],
        "taxes": [
          {
            "name": "VAT (20%)",
            "inclusive": true,
            "rate": "20.0"
          }
        ]
     }'</span>
</code></pre></div>
<blockquote>
<p>Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f2a4ceed-0d10-4fc4-b9b2-f5b4b459dc5c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"units"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currencyCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment for invoice #1234"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dataCollection"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"email"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"taxes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VAT (20%)"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"inclusive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20.00"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Create a new payment link</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>POST https://staging.api.lopay.com/api/1/partner/payment-link</code></p>
<h3 id='request-body-3'>Request body</h3>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>amount.units</code></td>
<td>integer</td>
<td>Payment amount in pence (i.e. £50 -&gt; 5000 units)</td>
</tr>
<tr>
<td><code>amount.currencyCode</code></td>
<td>string</td>
<td>Currency code (i.e. GBP)</td>
</tr>
<tr>
<td><code>description</code></td>
<td>string</td>
<td>Payment link description</td>
</tr>
<tr>
<td><code>dataCollection</code></td>
<td>string[]</td>
<td>Data to collect from customer. Available values: &quot;name&quot;, &quot;businessName&quot;, &quot;phoneNumber&quot;, &quot;email&quot;, and &quot;address&quot;.</td>
</tr>
<tr>
<td><code>taxes[].name</code></td>
<td>string</td>
<td>Name of the tax (i.e. VAT 20%)</td>
</tr>
<tr>
<td><code>taxes[].inclusive</code></td>
<td>boolean</td>
<td>Whether the tax is inclusive or not. Will always be <code>true</code> for VAT.</td>
</tr>
<tr>
<td><code>taxes[].rate</code></td>
<td>string</td>
<td>Tax rate percentage. (i.e. &quot;20.0&quot; -&gt; 20%)</td>
</tr>
</tbody></table>
<h3 id='response-body-4'>Response body</h3>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>Payment link ID.</td>
</tr>
<tr>
<td><code>status</code></td>
<td>string</td>
<td>Payment link status. Available values: &quot;pending&quot;, &quot;cancelled&quot;, or &quot;completed&quot;.</td>
</tr>
<tr>
<td><code>amount.units</code></td>
<td>integer</td>
<td>Payment amount in pence (i.e. £50 -&gt; 5000 units).</td>
</tr>
<tr>
<td><code>amount.currencyCode</code></td>
<td>string</td>
<td>Currency code (i.e. GBP).</td>
</tr>
<tr>
<td><code>description</code></td>
<td>string</td>
<td>Payment link description.</td>
</tr>
<tr>
<td><code>dataCollection</code></td>
<td>string[]</td>
<td>Data to collect from customer. Available values: &quot;name&quot;, &quot;businessName&quot;, &quot;phoneNumber&quot;, &quot;email&quot;, and &quot;address&quot;.</td>
</tr>
<tr>
<td><code>taxes[].name</code></td>
<td>string</td>
<td>Name of the tax (i.e. VAT 20%).</td>
</tr>
<tr>
<td><code>taxes[].inclusive</code></td>
<td>boolean</td>
<td>Whether the tax is inclusive or not. Will always be <code>true</code> for VAT.</td>
</tr>
<tr>
<td><code>taxes[].rate</code></td>
<td>string</td>
<td>Tax rate percentage. (i.e. &quot;20.0&quot; -&gt; 20%).</td>
</tr>
</tbody></table>
<h2 id='updating-a-payment-link'>Updating a payment link</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> <span class="s2">"PUT"</span> <span class="s2">"https://staging.api.lopay.com/api/1/partner/payment-link/:paymentLinkId"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"x-api-key: api-key"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"x-merchant-id: merchant-id"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
        "amount": {
          "units": 5000,
          "currencyCode": "GBP"
        },
        "description": "Payment for invoice #1234",
        "dataCollection": ["name", "email"],
        "taxes": [
          {
            "name": "VAT (20%)",
            "inclusive": true,
            "rate": "20.0"
          }
        ]
     }'</span>
</code></pre></div>
<blockquote>
<p>200 Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f2a4ceed-0d10-4fc4-b9b2-f5b4b459dc5c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"units"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currencyCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment for invoice #1234"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dataCollection"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"email"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"taxes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VAT (20%)"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"inclusive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20.0"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Update an existing payment link</p>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>POST https://staging.api.lopay.com/api/1/partner/payment-link/:paymentLinkId</code></p>
<h3 id='request-body-4'>Request body</h3>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>amount.units</code></td>
<td>integer</td>
<td>Payment amount in pence (i.e. £50 -&gt; 5000 units)</td>
</tr>
<tr>
<td><code>amount.currencyCode</code></td>
<td>string</td>
<td>Currency code (i.e. GBP)</td>
</tr>
<tr>
<td><code>description</code></td>
<td>string</td>
<td>Payment link description</td>
</tr>
</tbody></table>
<h3 id='response-body-5'>Response body</h3>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>Payment link ID</td>
</tr>
<tr>
<td><code>status</code></td>
<td>string</td>
<td>Payment link status.</td>
</tr>
<tr>
<td><code>amount.units</code></td>
<td>integer</td>
<td>Payment amount in pence (i.e. £50 -&gt; 5000 units)</td>
</tr>
<tr>
<td><code>amount.currencyCode</code></td>
<td>string</td>
<td>Currency code (i.e. GBP)</td>
</tr>
<tr>
<td><code>description</code></td>
<td>string</td>
<td>Payment link description</td>
</tr>
<tr>
<td><code>dataCollection</code></td>
<td>string[]</td>
<td>Data to collect from customer.</td>
</tr>
<tr>
<td><code>taxes[].name</code></td>
<td>string</td>
<td>Name of the tax (i.e. VAT 20%).</td>
</tr>
<tr>
<td><code>taxes[].inclusive</code></td>
<td>boolean</td>
<td>Whether the tax is inclusive or not.</td>
</tr>
<tr>
<td><code>taxes[].rate</code></td>
<td>string</td>
<td>Tax rate percentage. (i.e. &quot;20.0&quot; -&gt; 20%)</td>
</tr>
</tbody></table>
<h2 id='sending-a-payment-link'>Sending a payment link</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> <span class="s2">"POST"</span> <span class="s2">"https://staging.api.lopay.com/api/1/partner/payment-link/:paymentLinkId/send"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"x-api-key: api-key"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"x-merchant-id: merchant-id"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
        "sms": {
          "recipient": "+447595510472"
        },
        "email": {
          "recipient": "peter.parker@gmail.com"
        }
     }'</span>
</code></pre></div>
<blockquote>
<p>Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"sms"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Send the payment link via email and/or SMS.</p>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>POST https://staging.api.lopay.com/api/1/partner/payment-link/:paymentLinkId/send</code></p>
<h3 id='request-body-5'>Request body</h3>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>sms.recipient</code></td>
<td>string</td>
<td>Optional. Receipient&#39;s phone number in E.164 format.</td>
</tr>
<tr>
<td><code>email.recipient</code></td>
<td>string</td>
<td>Optional. Receipient&#39;s email address.</td>
</tr>
</tbody></table>

<aside class="notice">
You must specify at least one or the other.
</aside>
<h3 id='response-body-6'>Response body</h3>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>sms.status</code></td>
<td>string</td>
<td>Optional. Will be either &quot;success&quot; or &quot;failed&quot;.</td>
</tr>
<tr>
<td><code>email.status</code></td>
<td>string</td>
<td>Optional. Will be either &quot;success&quot; or &quot;failed&quot;.</td>
</tr>
</tbody></table>
<h2 id='revoke-a-payment-link'>Revoke a payment link</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> <span class="s2">"DELETE"</span> <span class="s2">"https://staging.api.lopay.com/api/1/partner/payment-link/:paymentLinkId/send"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"x-api-key: api-key"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"x-merchant-id: merchant-id"</span> <span class="se">\</span>
</code></pre></div>
<blockquote>
<p>204 Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;&lt; empty response &gt;&gt;
</code></pre></div>
<p>Disable a payment link. The payment link&#39;s status will be set to <code>cancelled</code> and will no longer be active.</p>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>DELETE https://staging.api.lopay.com/api/1/partner/payment-link/:paymentLinkId</code></p>
<h3 id='response-body-7'>Response body</h3>
<p>No body</p>
<h2 id='list-payment-links'>List payment links</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://staging.api.lopay.com/api/1/partner/payment-link"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"x-api-key: api-key"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"x-merchant-id: merchant-id"</span> <span class="se">\</span>
</code></pre></div>
<blockquote>
<p>200 Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f2a4ceed-0d10-4fc4-b9b2-f5b4b459dc5c"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"units"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currencyCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment for invoice #1234"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53121e81-43f3-4e94-a34b-8a3d3f216b92"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"units"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currencyCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment for invoice #5555"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"paging"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"pageNumber"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pageSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pageTotal"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>List all payment links.</p>
<h3 id='http-request-8'>HTTP request</h3>
<p><code>GET https://staging.api.lopay.com/api/1/partner/payment-link</code></p>
<h3 id='query-parameters'>Query parameters</h3>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>pageSize</code></td>
<td>number</td>
<td>Optional - default 20. Number of payment links to return</td>
</tr>
<tr>
<td><code>pageNumber</code></td>
<td>number</td>
<td>Optional - default 1. Receipient&#39;s email address.</td>
</tr>
<tr>
<td><code>status</code></td>
<td>string</td>
<td>Optional. Filter by payment link status. Available values: &quot;pending&quot;, &quot;cancelled&quot;, or &quot;completed&quot;.</td>
</tr>
</tbody></table>
<h3 id='response-body-8'>Response body</h3>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>data[].id</code></td>
<td>string</td>
<td>Payment link ID.</td>
</tr>
<tr>
<td><code>data[].status</code></td>
<td>string</td>
<td>Payment link status.</td>
</tr>
<tr>
<td><code>data[].amount.units</code></td>
<td>string</td>
<td>Payment link amount in pence.</td>
</tr>
<tr>
<td><code>data[].amount.currencyCode</code></td>
<td>string</td>
<td>Payment link amount in currency.</td>
</tr>
<tr>
<td><code>data[].description</code></td>
<td>string</td>
<td>Payment link description.</td>
</tr>
<tr>
<td><code>paging.pageNumber</code></td>
<td>number</td>
<td>Current page of the response.</td>
</tr>
<tr>
<td><code>paging.pageSize</code></td>
<td>number</td>
<td>Number of payment links to return in response.</td>
</tr>
<tr>
<td><code>paging.pageTotal</code></td>
<td>number</td>
<td>Number of total available pages of payment links.</td>
</tr>
<tr>
<td><code>paging.count</code></td>
<td>number</td>
<td>Total number of payment links.</td>
</tr>
</tbody></table>
<h2 id='get-payment-link'>Get payment link</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://staging.api.lopay.com/api/1/partner/payment-link/:paymentLinkId"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"x-api-key: api-key"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"x-merchant-id: merchant-id"</span> <span class="se">\</span>
</code></pre></div>
<blockquote>
<p>200 Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f2a4ceed-0d10-4fc4-b9b2-f5b4b459dc5c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"units"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currencyCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment for invoice #1234"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dataCollection"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"email"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"taxes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VAT (20%)"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"inclusive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get payment link details</p>
<h3 id='http-request-9'>HTTP request</h3>
<p><code>GET https://staging.api.lopay.com/api/1/partner/payment-link/:paymentLinkId</code></p>
<h3 id='response-body-9'>Response body</h3>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>Payment link ID.</td>
</tr>
<tr>
<td><code>status</code></td>
<td>string</td>
<td>Payment link status.</td>
</tr>
<tr>
<td><code>amount.units</code></td>
<td>string</td>
<td>Payment link amount in pence.</td>
</tr>
<tr>
<td><code>amount.currencyCode</code></td>
<td>string</td>
<td>Payment link amount in currency.</td>
</tr>
<tr>
<td><code>description</code></td>
<td>string</td>
<td>Payment link description.</td>
</tr>
<tr>
<td><code>dataCollection</code></td>
<td>string[]</td>
<td>Data to collect from customer.</td>
</tr>
<tr>
<td><code>taxes[].name</code></td>
<td>string</td>
<td>Name of the tax (i.e. VAT 20%).</td>
</tr>
<tr>
<td><code>taxes[].inclusive</code></td>
<td>boolean</td>
<td>Whether the tax is inclusive or not.</td>
</tr>
<tr>
<td><code>taxes[].rate</code></td>
<td>string</td>
<td>Tax rate percentage (i.e. &quot;20.0&quot;).</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<p>The Lopay Partner API can return the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>422</td>
<td>Unprocessable entity -- Your request is valid, but we are unable to process it.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is missing or incorrect.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- Resource not found</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t json.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- Try again in a bit</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
</tbody></table>

<p>All error responses will be in the following format:</p>

<aside class="pre">
{
  "httpCode": 400,
  "errorCode": "LO_PAY_ERR",
  "errorMessage": "Invalid request"
}
</aside>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
